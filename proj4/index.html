<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<style>
  body {
    padding: 100px;
    width: 1000px;
    margin: auto;
    text-align: left;
    font-weight: 300;
    font-family: 'Open Sans', sans-serif;
    color: #121212;
  }
  h1, h2, h3, h4 {
    font-family: 'Source Sans Pro', sans-serif;
  }
</style>
<title>CS 180: Face Morphing</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link href="https://fonts.googleapis.com/css?family=Open+Sans|Source+Sans+Pro" rel="stylesheet">
</head>


<body>

<h1 align="middle">CS 180: Intro to Computer Vision and Computational Photography, Fa2023</h1>
<h1 align="middle">Project 4: (Auto)Stitching Photo Mosaics</h1>
<h2 align="middle">ANTHONY ZHANG, 3036218223</h2>

<br><br>

<div>

<h2 align="middle">Part 1: Shoot the Pictures</h2>
<p> 
    I mostly went aronud campus and shot a bunch of pictures, but a lot of my pictures did not come out that well because I was too shaky. I ended up performing a bunch of homographies and stiching, hopefully 
</p>    
<div align="middle">
    <table style="width=100%">
    <tr>
        <td>
        <img src="images/im1left.jpg" align="middle" width="300px"/>
        <figcaption align="middle"></figcaption>
        </td>
        <td>
        <img src="images/im1mid.jpg" align="middle" width="300px"/>
        <figcaption align="middle">Li Ka Shing to the Bay Viewpoint</figcaption>
        </td>
        <td>
          <img src="images/im1right.jpg" align="middle" width="300px"/>
          <figcaption align="middle"></figcaption>
        </td>
    </tr>
    </table>
</div>

<div align="middle">
  <table style="width=100%">
  <tr>
      <td>
      <img src="images/im3left.jpg" align="middle" width="450px"/>
      <figcaption align="middle">Left Side of My Backyard</figcaption>
      </td>
      <td>
      <img src="images/im3right.jpg" align="middle" width="450px"/>
      <figcaption align="middle">Right Side of My Backyard</figcaption>
      </td>
  </tr>
  <tr>
    <td>
    <img src="images/im4left.jpg" align="middle" width="450px"/>
    <figcaption align="middle">Left Side of Rose Street, Berkeley</figcaption>
    </td>
    <td>
    <img src="images/im4right.jpg" align="middle" width="450px"/>
    <figcaption align="middle">Right Side of Rose Street, Berkeley</figcaption>
    </td>
</tr>
  </table>
</div>

<h2 align="middle">Part 2: Recovering Homographies</h2>
<p> 
    A homography can be defined by 4 pairs of corresponding points, and it has 8 degrees of freedom, since the last entry is a scaling factor. The following equation from office hours describes how to solve for a homography. One problem is that the system is overdetermined if you have more than 4 pairs of points, so simply using least squares to find the minimum error homography solution is a quick and clear qay of dealing with this, while also adding a layer of robustness. 
    The next image shows the code I used to build the homography.
</p>    
<div align="middle">
    <table style="width=100%">
    <tr>
        <td>
        <img src="images/homography_eq.png" align="middle" width="300px"/>
        <figcaption align="middle">To add more points, simply horizontally stack more.</figcaption>
        </td>
    </tr>
    <tr>
      <td>
      <img src="images/homography_code.png" align="middle" width="300px"/>
      <figcaption align="middle">This code accepts any number of points, and uses least squares.</figcaption>
      </td>
  </tr>
    </table>
</div>


<h2 align="middle">Part 3: Warp the Images</h2>
<p>
    Here is some examples of the warping applied to do some image rectification! I'm not sure why they did not turn out the best - there is some issue with the processing of the 
</p>

<div align="middle">
  <table style="width=100%">
  <tr>
      <td>
      <img src="images/rectify1.jpg" align="middle" width="450px"/>
      <figcaption align="middle">Original Textbook on Table</figcaption>
      </td>
      <td>
      <img src="images/im3right.jpg" align="middle" width="450px"/>
      <figcaption align="middle">Rectified Textbook Cover</figcaption>
      </td>
  </tr>
  <tr>
    <td>
    <img src="images/rectify2.jpg" align="middle" width="450px"/>
    <figcaption align="middle">Original Computer Scrren</figcaption>
    </td>
    <td>
    <img src="images/im4right.jpg" align="middle" width="450px"/>
    <figcaption align="middle">Rectified Computer Screen</figcaption>
    </td>
</tr>
  </table>
</div>

<h2 align="middle">Part 4: Blend the Images into a Mosaic</h2>
<p>
    Here are the images from earlier blended into a mosaic - I used the negative coordinates to offset and align the images, which actually turned out pretty nicely! The images were blended together with weighted averaging, which also turned out quite nicely. I believe the distortion and blurriness is not from misalignment, as I double checked my maths strenously, but rather just from moving the position of the camera too much between pictures. I believe a tripod wouldn't helped massively here.
</p>
<div align="middle">
    <table style="width=100%">
        <tr>
            <td>
              <img src="images/im1left.jpg" align="middle" width="600px"/>
              <figcaption align="middle">Left Part</figcaption>
            </td>
            <td>
              <img src="images/im1mid.jpg" align="middle" width="600px"/>
              <figcaption align="middle">Middle Part</figcaption>
          </td>
            <td>
                <img src="images/im1leftmid.jpg.jpg" align="middle" width="600px"/>
                <figcaption align="middle">Mosaic of Li Ka Shing Bay Viewpoint (Left and Middle Images)</figcaption>
            </td>
        </tr>
        <br>
        <tr>
          <td>
            <img src="images/im4left.jpg" align="middle" width="600px"/>
            <figcaption align="middle">Left Half</figcaption>
          </td>
          <td>
            <img src="images/im4right.jpg" align="middle" width="600px"/>
            <figcaption align="middle">Right Half</figcaption>
        </td>
          <td>
              <img src="images/im4_test1.jpg" align="middle" width="600px"/>
              <figcaption align="middle">Mosaic of Rose Street at Night (Left and Right Images)</figcaption>
          </td>
        </tr>
        <br>
        <tr>
          <td>
            <img src="images/im3left.jpg" align="middle" width="600px"/>
            <figcaption align="middle">Left Half</figcaption>
          </td>
          <td>
            <img src="images/im3right.jpg" align="middle" width="600px"/>
            <figcaption align="middle">Right Half</figcaption>
        </td>
          <td>
              <img src="images/im3_test1.jpg" align="middle" width="600px"/>
              <figcaption align="middle">Mosaic of my Backyard</figcaption>
          </td>
        </tr>
        
    </table>
</div>

<div align="middle">
  <table style="width=100%">
  <tr>
      <td>
      <img src="images/im1_test.jpg" align="middle" width="300px"/>
      <figcaption align="middle">Full Li Ka Shing Mosaic</figcaption>
      </td>
  </tr>
  </table>
</div>



<h2 align="middle">Part 5: What I've Learned</h2>
<p>
    I learned a lot about how homographies work and the way we can rebuild any plane and see how light intersects that plane. That was really cool to me. I learned a lot about various techniques of blending as well.
</p>

</body>
</html>